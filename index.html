<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>cz&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前端之路">
<meta name="keywords" content="前端,js,javascript,es6,html5,开发者,程序猿,极客,编程,代码,IT,Developer,Programmer,Coder,Geek,html,css,css3">
<meta property="og:type" content="website">
<meta property="og:title" content="cz&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="cz&#39;s blog">
<meta property="og:description" content="前端之路">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cz&#39;s blog">
<meta name="twitter:description" content="前端之路">
  
    <link rel="alternative" href="/atom.xml" title="cz&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <section id="main">
  
    <article id="post-crossDomain" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2018/04/02/crossDomain/">前端跨域与解决方案</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2018/04/02/crossDomain/" class="article-date">
  <time datetime="2018-04-02T12:18:30.000Z" itemprop="datePublished">2018-04-02</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="跨域的概念"><a href="#跨域的概念" class="headerlink" title="跨域的概念"></a>跨域的概念</h3><p>广义的跨域指的是一个域下的文档或者脚本试图去请求另一个域下的资源。包括：</p>
<ol>
<li>资源跳转：<code>&lt;a&gt;</code>，重定向，表单提交</li>
<li>嵌入标签：<code>&lt;script&gt;</code>，<code>&lt;img&gt;</code>，<code>&lt;iframe&gt;</code>，<code>&lt;link&gt;</code> ，<code>&lt;video&gt;</code>，<code>&lt;audio&gt;</code>等标签，以及<code>@font-face</code>引入的字体文件。</li>
<li>js 请求：AJAX</li>
</ol>
<p>但一般情况下讨论的跨域是狭义的，本质上是受浏览器同源策略限制的一类请求场景</p>
<blockquote>
<p>同源策略：同源是指两个页面协议，域名和端口相同，不同源的页面之间是不能互相读取对方资源的。同源策略限制 Cookie，LocalStorage 等的读取，以及 AJAX。</p>
</blockquote>
<p>需要注意的是，如果是协议和端口造成的跨域问题，前端是无能为力的。</p>
        
          <p class="article-more-link">
            <a href="/posts/2018/04/02/crossDomain/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-form" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/10/24/form/">HTML 表单</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/10/24/form/" class="article-date">
  <time datetime="2017-10-24T03:28:57.000Z" itemprop="datePublished">2017-10-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/html/">html</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="form"><a href="#form" class="headerlink" title="form"></a>form</h2><p><code>&lt;form&gt;</code>标签用于创建供用户输入的 HTML 表单。</p>
<h3 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>accept-charset</td>
<td>character_set</td>
<td>规定服务器可处理的表单数据字符集。</td>
</tr>
<tr>
<td>action</td>
<td>URL</td>
<td>规定当提交表单时向何处发送表单数据。</td>
</tr>
<tr>
<td>enctype</td>
<td>application，x-www-form-urlencoded，multipart，form-datatext，plain</td>
<td>规定在向服务器发送表单数据之前如何对其进行编码。（适用于 method=”post” 的情况）</td>
</tr>
<tr>
<td>method</td>
<td>get，post</td>
<td>规定用于发送表单数据的 HTTP 方法。</td>
</tr>
<tr>
<td>name</td>
<td>text</td>
<td>规定表单的名称。</td>
</tr>
<tr>
<td>novalidate</td>
<td>novalidate</td>
<td>如果使用该属性，则提交表单时不进行验证。</td>
</tr>
<tr>
<td>target</td>
<td><code>_blank</code>，<code>_self</code>，<code>_parent</code>，<code>_top</code></td>
<td>规定在何处打开 action URL。</td>
</tr>
</tbody>
</table>
        
          <p class="article-more-link">
            <a href="/posts/2017/10/24/form/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-html" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/10/14/html/">HTML 总结</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/10/14/html/" class="article-date">
  <time datetime="2017-10-14T15:10:11.000Z" itemprop="datePublished">2017-10-14</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/html/">html</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="HTML、XML、XHTML-之间的区别与联系"><a href="#HTML、XML、XHTML-之间的区别与联系" class="headerlink" title="HTML、XML、XHTML 之间的区别与联系"></a>HTML、XML、XHTML 之间的区别与联系</h2><ul>
<li>HTML(HyperText Markup Language)，即超文本标记语言。超文本就是指页面内可以包含图片、链接，甚至音乐、程序等非文字元素。超级文本标记语言就是为网页创建和其它能在网页浏览器中看到的信息而设计的一种标记语言。</li>
<li>XML(Extentsible Markup Language)，即可扩展标记语言，是 SGML（标准通用标记语言）的子集，是一种用于标记电子文件使其具有结构性的标记语言。XML 被设计用来传输和存储数据，其焦点是数据的内容，而 HTML 被设计用来显示数据，其焦点是数据的外观。也可以说，XML 是独立于软件和硬件的信息传输工具。</li>
<li>XHTML(Extensible HyperText Markup Language)，即可扩展超文本标记语言。XHTML 是更严格更纯净的 HTML 版本，是作为一种 XML 应用被重新定义的 HTML。HTML 语法要求比较松散，这样对网页编写者来说，比较方便，但对于机器来说，语法松散导致很难处理。传统计算机还能兼容松散语法，但对于许多其他设备，比如手机，难度就比较大。因此产生了由 DTD 定义规则，语法要求更加严格的 XHTML。</li>
</ul>
        
          <p class="article-more-link">
            <a href="/posts/2017/10/14/html/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-network" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/10/11/network/">从 URL 输入到页面显示到底发生了什么？</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/10/11/network/" class="article-date">
  <time datetime="2017-10-11T02:09:10.000Z" itemprop="datePublished">2017-10-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/计算机网络/">计算机网络</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>从在浏览器中输入网址，到屏幕上显示出网页的内容，在这个只有几秒钟的过程中，很多硬件和软件都在各自的岗位上相互配合完成了一系列的工作。  ——《网络是怎样连接的》</p>
</blockquote>
<h2 id="生成-HTTP-请求信息"><a href="#生成-HTTP-请求信息" class="headerlink" title="生成 HTTP 请求信息"></a>生成 HTTP 请求信息</h2><p>我们一般都是在 Web 浏览器中输入网址，所以要分析输入 URL 到页面展示的完整流程，就要先从浏览器开始。</p>
<h3 id="解析-URL"><a href="#解析-URL" class="headerlink" title="解析 URL"></a>解析 URL</h3><blockquote>
<p>URL：Uniform Resource Locator，统一资源定位符。URL 是对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的 URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。</p>
</blockquote>
<p>我们平时说的网址就是一种 URL，以 http: 或 https: 开头。URL 也有其他协议，比如 ftp:、mailto: 等。</p>
<blockquote>
<p>协议（protocol）是指通信操作的规则。</p>
</blockquote>
<p>根据 HTTP 的规则，URL 包含几个部分，以<code>https://www.host.com:80/index.html?name=value#1</code>为例：</p>
<ul>
<li>协议：也称方案名（scheme），指的是访问服务器以获取资源时要使用哪种协议，即 https:。</li>
<li>主机：host，资源宿主服务器的主机名或 IP 地址，即”//“后面的<code>www.host.com</code>。</li>
<li>端口：port，资源宿主服务器正在监听的端口号，即”:”后面的数字 80。</li>
<li>路径：path，服务器上资源的本地名，由一个斜杠”/“将其与前面的 URL 组件分隔开来，即 index.html。</li>
<li>查询字符串：query，可以用该部分传递参数以达到某种目的，用”?”与其他部分分隔，即 ?name=value。</li>
<li>片段标识符：fragment，表示资源片段的名字，不会将该部分传到服务器，用”#”与其他部分分隔，即 #1。</li>
</ul>
        
          <p class="article-more-link">
            <a href="/posts/2017/10/11/network/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-ProJavaScript-Notes-17" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/09/24/ProJavaScript-Notes-17/">重读 JS 高程（Chapter24、Chapter25）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/09/24/ProJavaScript-Notes-17/" class="article-date">
  <time datetime="2017-09-24T15:15:30.000Z" itemprop="datePublished">2017-09-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter24-最佳实践"><a href="#Chapter24-最佳实践" class="headerlink" title="Chapter24. 最佳实践"></a>Chapter24. 最佳实践</h2><h3 id="可维护性"><a href="#可维护性" class="headerlink" title="可维护性"></a>可维护性</h3><h4 id="什么是可维护的代码"><a href="#什么是可维护的代码" class="headerlink" title="什么是可维护的代码"></a>什么是可维护的代码</h4><ul>
<li>可理解性</li>
<li>直观性</li>
<li>可适应性</li>
<li>可扩展性</li>
<li>可调试性</li>
</ul>
<h4 id="代码约定"><a href="#代码约定" class="headerlink" title="代码约定"></a>代码约定</h4><p>一种让代码变得可维护的简单途径是形成一套 JavaScript 代码的书写约定。</p>
<p><strong>可读性</strong></p>
<ul>
<li>缩进，常见为 4 个空格。</li>
<li>注释，需要进行注释的地方有：<ul>
<li>函数和方法</li>
<li>大段代码</li>
<li>复杂的算法</li>
<li>Hack</li>
</ul>
</li>
</ul>
        
          <p class="article-more-link">
            <a href="/posts/2017/09/24/ProJavaScript-Notes-17/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-ProJavaScript-Notes-16" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/09/24/ProJavaScript-Notes-16/">重读 JS 高程（Chapter23）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/09/24/ProJavaScript-Notes-16/" class="article-date">
  <time datetime="2017-09-24T05:18:42.000Z" itemprop="datePublished">2017-09-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter23-离线应用与客户端存储"><a href="#Chapter23-离线应用与客户端存储" class="headerlink" title="Chapter23. 离线应用与客户端存储"></a>Chapter23. 离线应用与客户端存储</h2><p>支持离线 Web 应用开发是 HTML5 的另一个重点。所谓离线 Web 应用，就是在设备不能上网的情况下仍然可以运行的应用。</p>
<h3 id="离线检测"><a href="#离线检测" class="headerlink" title="离线检测"></a>离线检测</h3><p>开发离线应用首先要检测设备的状态，根据设备在线或者离线进行接下来的操作。HTML5 为我们提供了两种判断设备在线状态的方式：</p>
<ul>
<li><code>navigator.onLine</code>属性：属性值为<code>true</code>表示设备能上网，值为<code>false</code>表示设备离线。</li>
<li><code>online</code>/<code>offline</code>事件：当网络从离线变为在线或者从在线变为离线时，分别触发这两个事件。这两个事件在<code>window</code>对象上触发。</li>
</ul>
<p>为了检测应用是否离线，我们可以通过navigator.onLine判断设备的初始状态，同时通过online/offline事件来确定网络的连接状态是否变化。online/offline事件首先在body上触发，随后会沿着document.body, document, window的顺序冒泡，所以我们可以对它们进行监听获得设备的状态变化。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(navigator.onLine)&#123;</span><br><span class="line">    <span class="comment">//正常工作</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//执行离线事件处理程序</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'online'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//进行离线缓存</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'offline'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//使用离线缓存</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/posts/2017/09/24/ProJavaScript-Notes-16/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-ProJavaScript-Notes-15" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/09/24/ProJavaScript-Notes-15/">重读 JS 高程（Chapter22）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/09/24/ProJavaScript-Notes-15/" class="article-date">
  <time datetime="2017-09-24T00:43:23.000Z" itemprop="datePublished">2017-09-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter22-高级技巧"><a href="#Chapter22-高级技巧" class="headerlink" title="Chapter22. 高级技巧"></a>Chapter22. 高级技巧</h2><h3 id="高级函数"><a href="#高级函数" class="headerlink" title="高级函数"></a>高级函数</h3><h4 id="安全的类型检测"><a href="#安全的类型检测" class="headerlink" title="安全的类型检测"></a>安全的类型检测</h4><p>使用<code>Object.prorotpye.toString.call(value)</code>，会返回一个<code>[object NativeConstructorName]</code>格式的字符串。每个类在内部都有一个<code>[[Class]]</code>属性，这个属性中就指定了上述字符串中的构造函数名。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prorotpye.toString.call([]); <span class="comment">// "[object Array]"</span></span><br></pre></td></tr></table></figure>
<h4 id="作用域安全的构造函数"><a href="#作用域安全的构造函数" class="headerlink" title="作用域安全的构造函数"></a>作用域安全的构造函数</h4><p>作用域安全的构造函数在进行任何更改前，首先确认<code>this</code>对象是正确类型的实例。如果不是，那么会创建新的实例并返回。如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(name, age, job);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = Person(<span class="string">"Nicholas"</span>, <span class="number">29</span>, <span class="string">"Software Engineer"</span>);</span><br><span class="line">alert(<span class="built_in">window</span>.name);   <span class="comment">//""</span></span><br><span class="line">alert(person1.name);  <span class="comment">//"Nicholas"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"Shelby"</span>, <span class="number">34</span>, <span class="string">"Ergonomist"</span>);</span><br><span class="line">alert(person2.name);  <span class="comment">//"Shelby"</span></span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/posts/2017/09/24/ProJavaScript-Notes-15/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-ProJavaScript-Notes-14" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/09/23/ProJavaScript-Notes-14/">重读 JS 高程（Chapter20、Chapter21）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/09/23/ProJavaScript-Notes-14/" class="article-date">
  <time datetime="2017-09-22T17:03:30.000Z" itemprop="datePublished">2017-09-23</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter20-JSON"><a href="#Chapter20-JSON" class="headerlink" title="Chapter20. JSON"></a>Chapter20. JSON</h2><p>JSON 是一种数据格式，不是一种编程语言。虽然具有相同的语法形式，但 JSON 并不从属于 JavaScript。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>JSON 的语法可以表示一下三种类型的值。</p>
<ul>
<li>简单值：使用与 JavaScript 相同的语法，可以在 JSON 表示字符串、数值、布尔值和<code>null</code>。但 JSON 不支持 JavaScript 中的特殊值<code>undefined</code>。</li>
<li>对象：对象作为一种复杂的数据类型，表示的是一组无序的键值对。每个键值对中的值可以是简单值，也可以是复杂的数据类型的值。</li>
<li>数组：数组也是一种复杂数据类型，表示一组有序的值的列表，可以通过数值索引来访问其中的值。数组的值也可以是任意类型。</li>
</ul>
<p>JSON 不支持变量、函数或者对象实例，它就是一种表示结构化数据的格式。</p>
<h4 id="简单值"><a href="#简单值" class="headerlink" title="简单值"></a>简单值</h4><blockquote>
<p>最简单的 JSON 数据形式就是简单值。</p>
</blockquote>
<p>值得注意的是，JSON 字符串必须使用双引号，其他和 JavaScript 没有区别。</p>
<h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><p>JSON 中的对象要求给属性加双引号，属性的值可以是复杂类型。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;Nicholas&quot;,</span><br><span class="line">    &quot;age&quot;: 29,</span><br><span class="line">    &quot;school&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;Merrimack College&quot;,</span><br><span class="line">        &quot;location&quot;: &quot;North Andover, MA&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>JSON 的数组可以与对象结合起来，构成复杂的数据结构。</p>
        
          <p class="article-more-link">
            <a href="/posts/2017/09/23/ProJavaScript-Notes-14/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-ProJavaScript-Notes-13" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/09/22/ProJavaScript-Notes-13/">重读 JS 高程（Chapter16-Chapter19）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/09/22/ProJavaScript-Notes-13/" class="article-date">
  <time datetime="2017-09-22T02:15:46.000Z" itemprop="datePublished">2017-09-22</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter16-HTML5-脚本编程"><a href="#Chapter16-HTML5-脚本编程" class="headerlink" title="Chapter16. HTML5 脚本编程"></a>Chapter16. HTML5 脚本编程</h2><h3 id="跨文档消息传送"><a href="#跨文档消息传送" class="headerlink" title="跨文档消息传送"></a>跨文档消息传送</h3><p>跨文档消息传送（cross-document messaging），简称 XDM，指的是在来自不同域的页面间传递消息。</p>
<p>XDM 的核心是<code>postMessage()</code>方法，除了 XDM 部分之外的其他部分也会提到这个方法名，但都是为了同一个目的：向另一个地方传递数据。对于 XDM 而言，另一个地方指的是包含在当前页面中的<code>&lt;iframe&gt;</code>元素，或者由当前页面弹出的窗口。</p>
<p><code>postMessage()</code>方法接受两个参数：一条消息和一个表示消息接收方来自哪个域的字符串。第二个参数对保障安全通信非常重要，可以防止浏览器把消息发送到不安全的地方。如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> iframeWindow = <span class="built_in">document</span>.getElementById(<span class="string">"myFrame"</span>).contentWindow;  </span><br><span class="line">iframeWindow.postMessage(<span class="string">"A secret"</span>, <span class="string">"http://www.wrox.com"</span>);  <span class="comment">//发送方代码</span></span><br></pre></td></tr></table></figure>
<p>最后一行代码尝试向内嵌框架中发送一条消息，并指定框架中的文档必须来源于<code>http://www.wrox.com</code>域。如果来源匹配，消息会传送到内嵌框架中；否则，<code>postMessage()</code>什么都不做。</p>
<p>接收到 XDM 消息后，会触发<code>window</code>对象的<code>message</code>事件，这个事件是以异步触发的。触发<code>message</code>事件后，传递给<code>onmessage</code>处理程序的事件对象包含以下三方面重要信息：</p>
<ul>
<li>data：作为<code>postMessage()</code>第一个参数传入的字符串数据。</li>
<li>origin：发送消息的文档所在的域，例如<code>http://www.wrox.com</code> 。</li>
<li>source：发送消息的文档的<code>window</code>对象的代理。这个代理主要用于在发送上一条消息的窗口中调用<code>postMessage()</code>方法。如果发送消息的窗口来自同一个域，那这个对象就是<code>window</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"message"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">if</span>(event.origin == <span class="string">"http://www.wrox.com"</span>)&#123;  </span><br><span class="line">        processMessage(event.data); <span class="comment">//处理接收的数据  </span></span><br><span class="line">        event.source.postMessage(<span class="string">"Received!"</span>, <span class="string">"http://p2p.wrox.com"</span>); <span class="comment">//可选：向来源窗口发送回执  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>最早<code>postMessage()</code>只能传入字符串，后来改成了允许传入任何数据结构，但并非所有浏览器都实现了这一变化，一般对传入的数据使用<code>JSON.stringify()</code>。XDM的兼容 IE8+ 和 其他主流浏览器，也支持相同域的页面间使用。</p>
        
          <p class="article-more-link">
            <a href="/posts/2017/09/22/ProJavaScript-Notes-13/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
    <article id="post-ProJavaScript-Notes-12" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/posts/2017/09/20/ProJavaScript-Notes-12/">重读 JS 高程（Chapter15）</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/posts/2017/09/20/ProJavaScript-Notes-12/" class="article-date">
  <time datetime="2017-09-20T04:45:30.000Z" itemprop="datePublished">2017-09-20</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chapter15-使用-Canvas-绘图"><a href="#Chapter15-使用-Canvas-绘图" class="headerlink" title="Chapter15. 使用 Canvas 绘图"></a>Chapter15. 使用 Canvas 绘图</h2><p>与浏览器环境中的其他组件类似，<code>&lt;canvas&gt;</code>由几组 API 组成，但并非所有浏览器都支持所有这些 API。除了具备基本绘图能力的 2D 上下文，<code>&lt;canvas&gt;</code>还建议了一个名为 WebGL 的 3D 上下文。兼容性：IE9+ 以及主流浏览器</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>要使用元素，必须先设置<code>width</code>和<code>height</code>属性，指定可以绘图的区域大小。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"drawing"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span>A drawing of something.<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要在 canvas 上画图，先要取得绘图上下文的引用，需要调用<code>getContext()</code>，传入上下文的名字。传入”2d”则取得 2D 上下文。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = <span class="built_in">document</span>.getElementById(<span class="string">"drawing"</span>);</span><br><span class="line"><span class="keyword">var</span> context = drwaing.getContext(<span class="string">"2d"</span>);</span><br></pre></td></tr></table></figure>
<p>使用<code>toDataURL()</code>方法可以导出绘制的图像，接受一个参数：图像的 MIME 类型格式。比如取得画布中一幅 PNG 格式的图像：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = <span class="built_in">document</span>.getElementById(<span class="string">"drawing"</span>);</span><br><span class="line"><span class="keyword">var</span> imgURI = drawing.toDataURL(<span class="string">"image/png"</span>);</span><br><span class="line"><span class="keyword">var</span> image = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">image.src = imgURI;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(image);</span><br></pre></td></tr></table></figure>
<h3 id="2D-上下文"><a href="#2D-上下文" class="headerlink" title="2D 上下文"></a>2D 上下文</h3><p>2D 上下文的坐标始于元素的左上角，原点坐标是 (0,0)。</p>
<h4 id="填充和描边"><a href="#填充和描边" class="headerlink" title="填充和描边"></a>填充和描边</h4><p>2D 上下文的两种基本绘图操作是填充和描边。</p>
<blockquote>
<p>填充，就是用指定的样式（颜色、渐变或图像）填充图形；描边，就是只在图形的边缘划线。</p>
</blockquote>
<p>操作的结果取决于两个属性：<code>fillStyle</code>和<code>strokeStyle</code>。它们的值可以是字符串、渐变对象或模式对象，而且他们的默认值都是”#000000”；字符串可以是颜色值的任何格式，包括颜色名、十六进制码、rgb、rgba、hsl 或 hsla。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> context = drawing.getContext(<span class="string">"2d"</span>);</span><br><span class="line">context.strokeStyle = <span class="string">"red"</span>;</span><br><span class="line">context.fillStyle = <span class="string">"#0000ff"</span>;</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/posts/2017/09/20/ProJavaScript-Notes-12/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>



  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        <aside id="sidebar">
  <nav class="menus">
  	<ul>
  		<li><a href="/"><i class="icon icon-home"></i></a></li>
  		
			<li><a href="/archives"><i class="icon icon-fenlei"></i></a></li>
  		
  		
			<li><a href="/tags"><i class="icon icon-tag"></i></a></li>
  		
  		
  			<li><a href="https://github.com/dtcz" target="_blank"><i class="icon icon-github"></i></a></li>
  		
  	</ul>
  </nav>
  <a id="go-top" href="#"><i class="icon icon-up"></i></a>
</aside>

      </div>
      <footer id="footer">
  
	<div id="footer-info" class="inner">
	  &copy; 2018 cz 
	  - Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	  - Theme <a href="https://github.com/hejianxian/hexo-theme-jane/" target="_blank">Jane</a>
	</div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tag</a>
  
    <a href="https://github.com/dtcz" class="mobile-nav-link">Github</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>